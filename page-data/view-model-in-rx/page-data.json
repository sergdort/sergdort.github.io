{"componentChunkName":"component---src-templates-blog-post-js","path":"/view-model-in-rx/","result":{"data":{"site":{"siteMetadata":{"title":"Journey before destination, tests before production"}},"markdownRemark":{"id":"e7abbab4-0d6a-536d-9c7b-9df49e7e33c3","excerpt":"According to the Microsoft Docs, a ViewModel acts as an intermediary between the view and the model, handling the view logic. It interacts with the model by‚Ä¶","html":"<p>According to the <a href=\"https://docs.microsoft.com/en-us/previous-versions/msp-n-p/hh848246(v%3dpandp.10)\">Microsoft Docs</a>, a ViewModel acts as an intermediary between the view and the model, handling the view logic. It interacts with the model by invoking methods in model classes and provides data in a form that the view can easily consume.</p>\n<p>When entering the Rx world, prepare to think about UI events, network requests, database queries, and other asynchronous operations as <strong>streams</strong> of values over time.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f8e4c7b842a0c32b80d45c04d2e31e7d/eea4a/morpheus.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHiIRqSf//EABgQAQADAQAAAAAAAAAAAAAAAAEAEBES/9oACAEBAAEFAnI1s6Wv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBABAQEBAQAAAAAAAAAAAAAAAQAhETH/2gAIAQEAAT8hQcC43AshD0Z9Ddv/2gAMAwEAAgADAAAAEFs//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EKx//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QiP/EABkQAQADAQEAAAAAAAAAAAAAAAEAESFBMf/aAAgBAQABPxAGKRLzGEouWuFQK6EHUE8Z2rvhLPZ//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"morpheus\"\n        title=\"\"\n        src=\"/static/f8e4c7b842a0c32b80d45c04d2e31e7d/1c72d/morpheus.jpg\"\n        srcset=\"/static/f8e4c7b842a0c32b80d45c04d2e31e7d/a80bd/morpheus.jpg 148w,\n/static/f8e4c7b842a0c32b80d45c04d2e31e7d/1c91a/morpheus.jpg 295w,\n/static/f8e4c7b842a0c32b80d45c04d2e31e7d/1c72d/morpheus.jpg 590w,\n/static/f8e4c7b842a0c32b80d45c04d2e31e7d/a8a14/morpheus.jpg 885w,\n/static/f8e4c7b842a0c32b80d45c04d2e31e7d/fbd2c/morpheus.jpg 1180w,\n/static/f8e4c7b842a0c32b80d45c04d2e31e7d/eea4a/morpheus.jpg 1280w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>With this mindset, I like to think of a <strong>ViewModel</strong> as a <a href=\"https://en.wikipedia.org/wiki/Black_box\">‚ÄúBlack Box‚Äù</a> that accepts UI triggers (button taps, table view selections, text editing events, etc.) along with other dependencies (NetworkService, DatabaseService, LocationService). It then applies Rx <a href=\"http://reactivex.io/documentation/operators.html\">operators</a> to define behavior. The ViewModel outputs transformed observables that you can bind back to your UI.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b86ccbce44dc8bd7148289301386dff2/abe2a/black_box.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVR42pWPv0rEQBDG90xIjOaPKQ4iJKYRi2DvoeAb2JzCNWfjK2jl2wiCnU16G8HCKq+gngaOXLicybLJ7madDbET5AZ+zDLfNx87CP1dg551NYRqzKYY11PG2GVd1xMhxPavZhiGr6rqKTyPZTdNcyjn4OkCsyyLMMYnVVUdFUUxgj5CtOGi/KYtmATnfJkkyQF4d+UChNw5jiNs2yYQLnRdv4Kx7nleCH0DQp7kXrNYEIIxbSil6PO9FR9vrAuklBVxHB+CeS8Mw01N0x5836+DIPiyLIsoinLhuq4z9P198Fh5nr90H2kaxhkTLecCPd6vxq/PqzGl1XlRVGdpmsqT1f7qLcAFdnoUSRRFmhSXs9mEzOe3hJBrXJY3BED/1GBd7QeEwJjfwliooAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"black_box\"\n        title=\"\"\n        src=\"/static/b86ccbce44dc8bd7148289301386dff2/fcda8/black_box.png\"\n        srcset=\"/static/b86ccbce44dc8bd7148289301386dff2/12f09/black_box.png 148w,\n/static/b86ccbce44dc8bd7148289301386dff2/e4a3f/black_box.png 295w,\n/static/b86ccbce44dc8bd7148289301386dff2/fcda8/black_box.png 590w,\n/static/b86ccbce44dc8bd7148289301386dff2/efc66/black_box.png 885w,\n/static/b86ccbce44dc8bd7148289301386dff2/abe2a/black_box.png 1067w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>As an example, let‚Äôs implement a searchable list displayed in a table view with a search bar.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 270px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4620fe5a4d36e40c248af46ee2c2097a/01bf6/heroes_list.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAIAAAAGkY33AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD0klEQVR42pVW3WscVRS/D75Y8MV330pBBMF/QKqloNYoglbUpjGSYkkUin1oCqGFVmqlYkRUsIhVQV/6UCXgi0JpaiQ1UdPGZmcns/P9PTsfO/uVmdnZ8ZeZ7CTubrLr4TLce8+cPR+/c36zRNd1VVVlWfY8LwiCjVSwwZGmaYqiDMMIw7DZbGYqbJIkWfpjcW5ujjQajXq9nutywU0jlS4VDmEQGHat7FRIGAZYuc9cgmDrskuFn4rCDc6M3FpEBEFSFG2XpWuaoap6r8rQdVmSiWO7yKHVilvbEkdRq1are16lXC77fjXVbi9oYWKaZfLX3dX7/6zJsmrbTrls27aLW8OwdN1UVQNONE3HsWvhHVGUyez42OVz07wgOY6NsuNdJBanccQdafUT3JPPThx85cwRukTVq3XTMhVFQYWS4YRc+nL22PlpUeeTdgI8Y6QURoAHILTj9t6L7D848dDTM7eW13VVoopFlmURebFYFEVxsOdHX728f3T2DqVu1jz+f0LePjt2/tyhEvObZXmSJLY7MlTOs1eOXph5hufuxnGCZszM2sMJucO787Tm+I1q1UednFTQ7cP8BPmFUn5aVWy/xrElwAyoS6US7DPjAWF/c+3qO+NH2fUiDqhBHnbeHtmmv2fq74WPz07cvnlTEMT1LaElSeI4jud5YMYwDJ646eNZUnXT8TClqa92ujY7YEd3xkEQYjQ72u1FVmRngdHsSlXBcHTEsiwMCXzrugGSiaKof87Xl5mv59dMt+o6dlbqdAz9SqViYnbKmDADxv1zHpl8/9nR00usnrTClHOa6PBarQbOyD3sCtXnU5OXjr+58PuyKAqoDXBCqUol9Dg3sNvI6KnT059epFRhE6oOTpmut0LdBXtw3wPPPXlgqbDIswLcZczacZj77O+cvPTysYmJUzTDwAJdCZD6voef6pPz2IsjK0uLvucYpgmiB4kZhpnVHIDhiCcK7rpeb+XI6y+MzLz7mibQ4Dl8PWCDZoINNkAYN3gKgpB1e3fYrF2jtHLQ2qK5MASorQzYnsh7wv6VsW6sarpdKazd5wUBOBUKBXylXNfNR2U3tMjPNz768fsPfF/eUeRk52DtRUPX33rkq8MP1615el2SZdCeiD7BPCHngSNNPjl54sPJSU+R6s0NdCVwrlar2GTsPYBJpo4c+uHb7wAVLMBhGAlYwh45o8L4euzV2xeef/ypx55YWbjFixIgQbR4YiqFVID8HsGTM1cvTn1x5U/dzni7/d/2HhD2GzMnx987fluSqXv3WI4D4+CvBMo2DHv/C638y2fGrwm6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"heroes_list\"\n        title=\"\"\n        src=\"/static/4620fe5a4d36e40c248af46ee2c2097a/01bf6/heroes_list.png\"\n        srcset=\"/static/4620fe5a4d36e40c248af46ee2c2097a/12f09/heroes_list.png 148w,\n/static/4620fe5a4d36e40c248af46ee2c2097a/01bf6/heroes_list.png 270w\"\n        sizes=\"(max-width: 270px) 100vw, 270px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Assume that all the model layer is already implemented and we only need to create the ViewModel and ViewController.</p>\n<p>First, let‚Äôs define our UI triggers:</p>\n<ul>\n<li><strong>Search trigger</strong>: User types to filter data in the list</li>\n<li><strong>Scroll trigger</strong>: User scrolls to load more data</li>\n</ul>\n<p>Now we can define the ViewModel interface</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">HeroListViewModel</span> <span class=\"token punctuation\">{</span>\n   \n   <span class=\"token keyword\">let</span> mainTableItems<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Driver</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">HeroCellSection</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n   <span class=\"token keyword\">let</span> searchTableItems<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Driver</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">HeroCellSection</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n   \n   <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>uiTriggers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>\n         searchQuery<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Observable</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n         nextPageTrigger<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Observable</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n         searchNextPageTrigger<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Observable</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n      api<span class=\"token punctuation\">:</span> <span class=\"token class-name\">HeroAPI</span><span class=\"token punctuation\">)</span>\n      \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Next, let‚Äôs define the transformations we want to apply to our triggers:</p>\n<ul>\n<li>Transform the search query into a network request</li>\n<li>Prevent firing requests for empty queries</li>\n<li>Debounce requests so we don‚Äôt fire on every keystroke</li>\n<li>Cancel previous requests in favor of new ones</li>\n<li>Trigger pagination when the user scrolls to the bottom</li>\n<li>Append new data to the existing array</li>\n</ul>\n<p>Here‚Äôs the implementation:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeroListViewModel</span> <span class=\"token punctuation\">{</span>\n   \n   <span class=\"token keyword\">let</span> mainTableItems<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Driver</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">HeroCellSection</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n   <span class=\"token keyword\">let</span> searchTableItems<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Driver</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">HeroCellSection</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n   <span class=\"token keyword\">let</span> dismissTrigger<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Driver</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token operator\">></span>\n   \n   <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>uiTriggers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>searchQuery<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Observable</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n      nextPageTrigger<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Observable</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n      searchNextPageTrigger<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Observable</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n      dismissTrigger<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Driver</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> api<span class=\"token punctuation\">:</span> <span class=\"token class-name\">HeroAPI</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \n    \n    searchTableItems <span class=\"token operator\">=</span> uiTriggers<span class=\"token punctuation\">.</span>searchQuery\n        <span class=\"token punctuation\">.</span>filter <span class=\"token punctuation\">{</span> <span class=\"token operator\">!</span><span class=\"token short-argument\">$0</span><span class=\"token punctuation\">.</span>isEmpty <span class=\"token punctuation\">}</span><span class=\"token comment\">//1</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">,</span> scheduler<span class=\"token punctuation\">:</span> <span class=\"token class-name\">MainScheduler</span><span class=\"token punctuation\">.</span>instance<span class=\"token punctuation\">)</span><span class=\"token comment\">//2</span>\n        <span class=\"token punctuation\">.</span>flatMapLatest <span class=\"token punctuation\">{</span> <span class=\"token comment\">//3</span>\n            <span class=\"token keyword\">return</span> api<span class=\"token punctuation\">.</span><span class=\"token function\">searchItems</span><span class=\"token punctuation\">(</span><span class=\"token short-argument\">$0</span><span class=\"token punctuation\">,</span>\n                batch<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Batch</span><span class=\"token punctuation\">.</span>initial<span class=\"token punctuation\">,</span>\n                endPoint<span class=\"token punctuation\">:</span> <span class=\"token class-name\">EndPoint</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Characters</span><span class=\"token punctuation\">,</span>\n                nextBatchTrigger<span class=\"token punctuation\">:</span> uiTriggers<span class=\"token punctuation\">.</span>searchNextPageTrigger<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 6</span>\n               <span class=\"token punctuation\">.</span>catchError <span class=\"token punctuation\">{</span> <span class=\"token omit keyword\">_</span> <span class=\"token keyword\">in</span>\n                  <span class=\"token keyword\">return</span> <span class=\"token class-name\">Observable</span><span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n               <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">.</span>map <span class=\"token punctuation\">{</span> <span class=\"token comment\">//4</span>\n            <span class=\"token keyword\">return</span> <span class=\"token short-argument\">$0</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HeroCellData</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">.</span>map <span class=\"token punctuation\">{</span><span class=\"token comment\">//5</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">HeroCellSection</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">:</span> <span class=\"token short-argument\">$0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">asDriver</span><span class=\"token punctuation\">(</span>onErrorJustReturn<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol>\n<li>Filters out empty strings‚Äîwe don‚Äôt want to fire requests for empty queries</li>\n<li>Throttles input so requests only fire after a 0.3-second pause in typing</li>\n<li>Transforms the search query into a request and cancels any previous in-flight request</li>\n<li>Maps <strong>Hero</strong> objects to <strong>HeroCellData</strong> (e.g., title, image URL)</li>\n<li>Wraps the array of <strong>HeroCellData</strong> into <strong>HeroCellSection</strong> for UITableView binding</li>\n<li>Triggers the next page request for pagination</li>\n</ol>\n<p>Now let‚Äôs bind our transformed <strong>Observables</strong> back to the <strong>UI</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\">     <span class=\"token comment\">//1</span>\n      <span class=\"token keyword\">let</span> viewModel <span class=\"token operator\">=</span> <span class=\"token class-name\">HeroListViewModel</span><span class=\"token punctuation\">(</span>uiTriggers<span class=\"token punctuation\">:</span><span class=\"token punctuation\">(</span>\n          searchQuery<span class=\"token punctuation\">:</span> searchCotroller<span class=\"token punctuation\">.</span>searchBar<span class=\"token punctuation\">.</span>rx_text<span class=\"token punctuation\">.</span><span class=\"token function\">asObservable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          nextPageTrigger<span class=\"token punctuation\">:</span> tableView<span class=\"token punctuation\">.</span>rx_nextPageTriger<span class=\"token punctuation\">,</span>\n          searchNextPageTrigger<span class=\"token punctuation\">:</span> searchContentController<span class=\"token punctuation\">.</span>tableView<span class=\"token punctuation\">.</span>rx_nextPageTriger\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          api<span class=\"token punctuation\">:</span> <span class=\"token class-name\">DefaultHeroAPI</span><span class=\"token punctuation\">(</span>paramsProvider<span class=\"token punctuation\">:</span> <span class=\"token class-name\">HeroesParamsProvider</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">//2</span>\n      viewModel<span class=\"token punctuation\">.</span>mainTableItems\n         <span class=\"token punctuation\">.</span><span class=\"token function\">drive</span><span class=\"token punctuation\">(</span>tableView<span class=\"token punctuation\">.</span><span class=\"token function\">rx_itemsWithDataSource</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n         <span class=\"token punctuation\">.</span><span class=\"token function\">addDisposableTo</span><span class=\"token punctuation\">(</span>disposableBag<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">//3</span>\n      viewModel<span class=\"token punctuation\">.</span>searchTableItems\n         <span class=\"token punctuation\">.</span><span class=\"token function\">drive</span><span class=\"token punctuation\">(</span>searchContentController<span class=\"token punctuation\">.</span>tableView<span class=\"token punctuation\">.</span><span class=\"token function\">rx_itemsWithDataSource</span><span class=\"token punctuation\">(</span>searchDataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n         <span class=\"token punctuation\">.</span><span class=\"token function\">addDisposableTo</span><span class=\"token punctuation\">(</span>disposableBag<span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>Create the <strong>ViewModel</strong> with UI triggers and dependencies</li>\n<li>Bind main table items to the <code class=\"language-text\">UITableView</code></li>\n<li>Bind search results to the <code class=\"language-text\">UISearchController</code>‚Äôs table view</li>\n</ol>\n<h3>Summary</h3>\n<ul>\n<li>The ViewModel is ‚Äúpure‚Äù and immutable‚Äîwe don‚Äôt even need to keep a reference to it in the ViewController (the <strong>disposeBag</strong> keeps subscriptions alive)</li>\n<li>All view logic is encapsulated in one place</li>\n<li>It‚Äôs easily testable with <a href=\"https://github.com/ReactiveX/RxSwift/tree/master/RxTests\">RxTests</a></li>\n</ul>\n<h3>Further Reading</h3>\n<ul>\n<li><a href=\"http://www.introtorx.com/\">Intro to Rx</a></li>\n<li><a href=\"https://store.raywenderlich.com/products/rxswift\">RxSwift Book</a></li>\n<li><a href=\"http://reactivex.io/\">ReactiveX</a></li>\n<li><a href=\"https://github.com/RxSwiftCommunity/RxDataSources\">RxDataSources</a></li>\n<li><a href=\"https://github.com/sergdort/RxMarvel\">Original Code</a></li>\n</ul>\n<p><strong>Happy RxSwift coding! üöÄ</strong></p>","frontmatter":{"title":"ViewModel in RxSwift World","date":"June 11, 2016","tags":["RxSwift","iOS","MVVM","architecture"]}},"previous":{"fields":{"slug":"/implement-rx/"},"frontmatter":{"title":"Learn Rx by Implementing Observable"}},"next":null},"pageContext":{"id":"e7abbab4-0d6a-536d-9c7b-9df49e7e33c3","slug":"/view-model-in-rx/","previousPostId":"7740deba-788a-5166-9192-a8e78d256b62","nextPostId":null}},"staticQueryHashes":["63159454"],"slicesMap":{}}